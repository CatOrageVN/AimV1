-- SMOOTH TOGGLE AIM (NO SHAKE)
-- By TuanHyperðŸ‘º

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

local Aim = false
local LockedTarget = nil

local AimPart = "Head" -- Ä‘á»•i thÃ nh HumanoidRootPart náº¿u cáº§n
local MaxDistance = 350
local Smoothness = 0.12 -- cÃ ng nhá» cÃ ng mÆ°á»£t, khÃ´ng rung

-- Toggle Aim báº±ng phÃ­m E
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.E then
		Aim = not Aim
		if not Aim then
			LockedTarget = nil
		end
	end
end)

-- TÃ¬m player gáº§n nháº¥t
local function GetClosestPlayer()
	local closest = nil
	local shortest = MaxDistance

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer
		and plr.Character
		and plr.Character:FindFirstChild(AimPart)
		and plr.Character:FindFirstChild("Humanoid")
		and plr.Character.Humanoid.Health > 0 then

			local distance = (Camera.CFrame.Position - plr.Character[AimPart].Position).Magnitude
			if distance < shortest then
				shortest = distance
				closest = plr
			end
		end
	end

	return closest
end

-- Aim loop mÆ°á»£t
RunService.RenderStepped:Connect(function()
	if Aim then
		if not LockedTarget then
			LockedTarget = GetClosestPlayer()
		end

		if LockedTarget and LockedTarget.Character then
			local aimPos = LockedTarget.Character[AimPart].Position
			local currentCF = Camera.CFrame
			local targetCF = CFrame.new(currentCF.Position, aimPos)

			Camera.CFrame = currentCF:Lerp(targetCF, Smoothness)
		end
	end
end)
